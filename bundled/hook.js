(()=>{function u(e){let t=decodeURIComponent(e);return typeof atob<"u"?atob(t):Buffer.from(t,"base64").toString("utf8")}function y(e){let t="";return typeof btoa<"u"?t=btoa(e):t=Buffer.from(e).toString("base64"),encodeURIComponent(t)}var l="passthrough.ndrewxie.repl.co",C="https://"+l,O=/^(?:[a-z+]+:)?\/\//,b=["https:","http:"];function m(e){let t=e,r="";try{let n=new URL(t,"https://www.example.com"),i=n.protocol;if(!b.includes(i.toLowerCase()))return t;typeof n.hash<"u"&&(r=n.hash)}catch{return t}t=t.replace(/(?:#[^#\/\?\.]*)*#[^#\/\?\.]*$/,"");let o="";return t.length>0&&(O.test(t)&&(o=C+"/q/"),o+=y(t)+"/"),o+=r,o}function L(e){let t=e;if(!t)return e;try{if(t=t.replace(/(?:#[^#\/\?\.]*)*#[^#\/\?\.]*$/,""),t.length==0)return e;let r=new URL(t,"https://example.com");if(!b.includes(r.protocol.toLowerCase()))return e;let o=r.pathname.split("/");if(o[0]==""&&o.splice(0,1),o.at(-1)==""&&o.pop(),o[0]!="q")return u(o[0]);o.splice(0,1);let n=new URL("https://example.com");for(let i=0;i<o.length;i++){let s=u(o[i]);n=new URL(s,n.href)}return n.hash=r.hash,n.href}catch{return e}}Error.stackTraceLimit=1/0;function g(e){if(e instanceof URL||e instanceof Location)return{href:e.href,type:"urlobj"};if(typeof e=="string"||e instanceof String)return{href:e,type:"string"};if(typeof trustedTypes<"u"&&e instanceof TrustedScriptURL)return{href:e.toString(),type:"trustedScriptURL"}}function _(e){let t=g(e);if(typeof t<"u")return t.href}function k(e,t){if(t=="string")return e;if(t=="urlobj")return new URL(e);if(typeof trustedTypes<"u"&&t=="trustedScriptURL")return trustedTypes.createPolicy("passthrough",{createScriptURL:o=>o}).createScriptURL(e)}function c(e){let t=g(e);if(typeof t>"u")return e;let r=L(t.href);return k(r,t.type)}function f(e){let t=g(e);if(typeof t>"u")return e;let r=m(t.href);return k(r,t.type)}window.decode_url=c;window.encode_url=f;function j(e,t){let r=e;for(;r;){let o=Object.getOwnPropertyDescriptor(r,t);if(o)return o;r=Object.getPrototypeOf(r)}}var d=new URL(_(c(window.location.href))),R=d.href,a=j(d,"href");Object.defineProperty(d,"href",{enumerable:!0,configurable:!1,get(){return R},set(e){R=e,a&&a.set&&a.set.call(d,e),window.location.href=f(e)}});d.replace=function(e){d.href=e};d.assign=function(e){d.href=e};function p(e){return e==window.location||e==document.location?d:e}window.sanitized_access=function(e,t,r){return typeof r>"u"?p(p(e)[t]):(e==window.History&&(t=="replaceState"&&typeof r[2]<"u"&&(r[2]=f(r[2])),t=="pushState"&&typeof r[2]<"u"&&(r[2]=f(r[2]))),p(e)[t](...r))};window.sanitized_constructor=function(e,t){return e==window.Request,new e(...t)};var x=["href","src","srcset"],w=[[window.HTMLScriptElement,["src"]]],P=["integrity","nonce"],h=Object.getOwnPropertyNames(window),S=[];for(let e=0;e<h.length;e++){let t=window[h[e]];if(!t||(t=t.prototype,S.includes(t)))continue;S.push(t);let r=!1,o=x;for(let n=0;n<w.length;n++)if(w[n][0].prototype==t){o=w[n][1],r=!0;break}if(!r){for(;t;)if(t=Object.getPrototypeOf(t),t==window.Element.prototype){r=!0;break}t=window[h[e]].prototype}if(r&&t){t.old_set_attribute||(t.old_set_attribute=t.setAttribute,t.setAttribute=function(){let n=arguments;for(let i=0;i<o.length;i++)if(n[0].toLowerCase()==o[i].toLowerCase()){n[1]=f(n[1]);break}P.includes(n[0].toLowerCase())||this.old_set_attribute(...n)}),t.old_get_attribute||(t.old_get_attribute=t.getAttribute,t.getAttribute=function(){let n=this.old_get_attribute(...arguments);for(let i=0;i<o.length;i++)if(arguments[0].toLowerCase()==o[i].toLowerCase())return _(c(n));return n});for(let n=0;n<o.length;n++){let i=Object.getOwnPropertyDescriptor(t,o[n]);i&&Object.defineProperty(t,o[n],{set:function(s){i.set.call(this,f(s))},get:function(){return _(c(i.get.call(this)))},configurable:!0})}}}var W=window.WebSocket;window.WebSocket=function(){let e=arguments;return e[0]=`wss://${l}?url=`+encodeURIComponent(e[0]),new W(...e)};window.navigator.serviceWorker.old_sw_register=window.navigator.serviceWorker.register;window.navigator.serviceWorker.register=function(){let e=arguments;return e[0]=f(e[0]),this.old_sw_register(...e)};function E(e){!e||!e.tagName||e.tagName.toLowerCase()=="iframe"&&e.contentWindow&&(e.contentWindow.WebSocket=WebSocket)}var U=[window.Element.prototype,document];for(let e=0;e<U.length;e++){let t=U[e];t.old_appendchild=t.appendChild,t.appendChild=function(){let r=this.old_appendchild(...arguments);return E(arguments[0]),r},t.old_prepend=t.prepend,t.prepend=function(){this.old_prepend(...arguments),E(arguments[0])}}window.XMLHttpRequest.prototype.old_open=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(){let e=arguments;return e[1]&&(e[1]=f(e[1])),this.old_open(...e)};var I=window.fetch,v=["referrer","referrerPolicy","integrity"],q=["method","headers","body","mode","credentials","cache","redirect","keepalive","signal"];window.fetch=function(e,t){let r,o={method:"GET",headers:new Headers};if(e instanceof Request){let n={};typeof e.body<"u"&&e.body!=null&&(n.duplex="half");for(let i of q)typeof e[i]>"u"||(n[i]=e[i]);r=new Request(f(e.url),n),o=void 0}else{r=f(e),o={};for(let n in t)v.includes(n)||(o[n]=t[n])}return I(r,o)};window.postMessage=function(){};})();
